(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{5810:(e,t,a)=>{Promise.resolve().then(a.bind(a,8467))},6046:(e,t,a)=>{"use strict";var l=a(6658);a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}})},8467:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var l=a(5155),s=a(2115),c=a(6046);function d(){let e=(0,c.useRouter)(),[t,a]=(0,s.useState)({template:null,csv:null}),[d,r]=(0,s.useState)({template:"idle",csv:"idle"}),p=e=>t=>{let l=t.target.files[0];l&&(a(t=>({...t,[e]:l})),r(t=>({...t,[e]:"file selected"})))},o=async l=>{let s=t[l];if(!s){r(e=>({...e,[l]:"please choose a file first"}));return}try{r(e=>({...e,[l]:"uploading"}));let t=new FormData;if(t.append("file",s),t.append("type",l),!(await fetch("/api/upload",{method:"POST",body:t})).ok)throw Error("upload failed");r(e=>({...e,[l]:"uploaded"})),a(e=>({...e,[l]:null})),"csv"===l&&"uploaded"===d.template&&e.push("/generate")}catch(e){console.error("upload error:",e),r(e=>({...e,[l]:"upload failed"}))}};return(0,l.jsxs)("div",{className:"bg-white text-black p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"File Upload"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"border p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Template"}),(0,l.jsx)("input",{type:"file",accept:".pdf",onChange:p("template"),className:"block mb-2 border border-black p-1"}),t.template&&(0,l.jsx)("p",{className:"text-sm",children:t.template.name}),(0,l.jsx)("button",{onClick:()=>o("template"),className:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800 disabled:opacity-50",disabled:!t.template,children:"Upload Template"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:d.template})]}),(0,l.jsxs)("div",{className:"border p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium mb-2",children:"CSV Data"}),(0,l.jsx)("input",{type:"file",accept:".csv",onChange:p("csv"),className:"block mb-2 border border-black p-1"}),t.csv&&(0,l.jsx)("p",{className:"text-sm",children:t.csv.name}),(0,l.jsx)("button",{onClick:()=>o("csv"),className:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800 disabled:opacity-50",disabled:!t.csv||"uploaded"!==d.template,children:"Upload CSV"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:d.csv})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(5810)),_N_E=e.O()}]);